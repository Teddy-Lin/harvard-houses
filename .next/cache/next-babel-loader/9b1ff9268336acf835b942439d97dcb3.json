{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/teddylin/Desktop/harvard-houses/pages/comments/index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nvar ReactCSSTransitionGroup = React.addons.CSSTransitionGroup;\n\nvar CommentBox = /*#__PURE__*/function (_React$Component) {\n  _inherits(CommentBox, _React$Component);\n\n  var _super = _createSuper(CommentBox);\n\n  function CommentBox(props) {\n    var _this;\n\n    _classCallCheck(this, CommentBox);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      data: props.data\n    };\n    _this.handleCommentSubmit = _this.handleCommentSubmit.bind(_assertThisInitialized(_this));\n    _this.handleDelete = _this.handleDelete.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CommentBox, [{\n    key: \"loadCommentsFromServer\",\n    value: function loadCommentsFromServer() {\n      var _this2 = this;\n\n      $.ajax({\n        url: this.props.url,\n        dataType: 'json',\n        success: function success(data) {\n          _this2.setState({\n            data: data\n          });\n        },\n        error: function error(xhr, status, err) {\n          console.error(_this2.props.url, status, err.toString());\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadCommentsFromServer(); // Disabled Polling because the 'server' never updates\n      // it is just a static file with two comments\n      // setInterval(this.loadCommentsFromServer, this.props.pollInterval);\n    }\n  }, {\n    key: \"handleCommentSubmit\",\n    value: function handleCommentSubmit(comment) {\n      var _this3 = this;\n\n      var comments = this.state.data;\n      var newComments = comments.concat([comment]);\n      this.setState({\n        data: newComments\n      });\n      $.ajax({\n        url: this.props.url,\n        dataType: 'json',\n        type: 'POST',\n        data: comment,\n        success: function success(data) {\n          _this3.setState({\n            data: data\n          });\n        },\n        error: function error(xhr, status, err) {\n          console.error(_this3.proprs.url, status, err.toString());\n        }\n      });\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(index) {\n      var comments = this.state.data;\n      comments.splice(index, 1);\n      this.setState({\n        data: comments\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 7\n        }\n      }, __jsx(CommentForm, {\n        onCommentSubmit: this.handleCommentSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }), __jsx(CommentList, {\n        data: this.state.data,\n        handleDelete: this.handleDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return CommentBox;\n}(React.Component);\n\nvar CommentForm = /*#__PURE__*/function (_React$Component2) {\n  _inherits(CommentForm, _React$Component2);\n\n  var _super2 = _createSuper(CommentForm);\n\n  function CommentForm() {\n    var _this4;\n\n    _classCallCheck(this, CommentForm);\n\n    _this4 = _super2.call(this);\n    _this4.handleSubmit = _this4.handleSubmit.bind(_assertThisInitialized(_this4));\n    _this4.onChange = _this4.onChange.bind(_assertThisInitialized(_this4));\n    _this4.state = _this4.setState({\n      author: '',\n      text: ''\n    });\n    return _this4;\n  }\n\n  _createClass(CommentForm, [{\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n\n      if (!this.state.text || !this.state.author) {\n        return;\n      }\n\n      this.props.onCommentSubmit({\n        author: this.state.author.trim(),\n        text: this.state.text.trim()\n      });\n      this.setState({\n        author: '',\n        text: ''\n      });\n      return;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"row Container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }, __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }, \"Comments\")), __jsx(\"div\", {\n        className: \"col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }\n      }, __jsx(\"input\", {\n        type: \"text\",\n        placeholder: \"Your name\",\n        name: \"author\",\n        onChange: this.onChange,\n        ref: \"author\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }\n      })), __jsx(\"div\", {\n        className: \"col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }\n      }, __jsx(\"input\", {\n        type: \"text\",\n        placeholder: \"Say something...\",\n        name: \"text\",\n        onChange: this.onChange,\n        ref: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      })), __jsx(\"div\", {\n        className: \"col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }\n      }, __jsx(\"input\", {\n        type: \"submit\",\n        value: \"Post\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return CommentForm;\n}(React.Component);\n\nvar CommentList = /*#__PURE__*/function (_React$Component3) {\n  _inherits(CommentList, _React$Component3);\n\n  var _super3 = _createSuper(CommentList);\n\n  function CommentList() {\n    _classCallCheck(this, CommentList);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(CommentList, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var handleDelete = this.props.handleDelete;\n      var commentNodes = this.props.data.map(function (comment, i) {\n        return __jsx(Comment, {\n          author: comment.author,\n          keyValue: i,\n          handleDelete: handleDelete,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 9\n          }\n        }, comment.text);\n      });\n      return __jsx(ReactCSSTransitionGroup, {\n        transitionName: \"example\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 7\n        }\n      }, commentNodes);\n    }\n  }]);\n\n  return CommentList;\n}(React.Component);\n\n;\n\nvar Comment = /*#__PURE__*/function (_React$Component4) {\n  _inherits(Comment, _React$Component4);\n\n  var _super4 = _createSuper(Comment);\n\n  function Comment(props) {\n    var _this6;\n\n    _classCallCheck(this, Comment);\n\n    _this6 = _super4.call(this, props);\n    _this6.handleDelete = _this6.handleDelete.bind(_assertThisInitialized(_this6));\n    return _this6;\n  }\n\n  _createClass(Comment, [{\n    key: \"handleDelete\",\n    value: function handleDelete() {\n      this.props.handleDelete(this.props.keyValue);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rawMarkup = marked(this.props.children.toString(), {\n        sanatize: true\n      });\n      return __jsx(\"div\", {\n        className: \"row Container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"col-xs-12 col-sm-12 col-md-12 col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }\n      }, __jsx(\"span\", {\n        className: \"close\",\n        onClick: this.handleDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, __jsx(\"i\", {\n        className: \"fa fa-trash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      })), __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, this.props.author)), __jsx(\"div\", {\n        className: \"col-xs-12 col-sm-12 col-md-12 col-lg-12 Comment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }\n      }, __jsx(\"span\", {\n        dangerouslySetInnerHTML: {\n          __html: rawMarkup\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Comment;\n}(React.Component);\n\nReactDOM.render(__jsx(CommentBox, {\n  url: \"https://codepen.io/Kikoku/pen/Qbwmpb.js\",\n  data: [],\n  pollInterval: 2000,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 17\n  }\n}), document.getElementById('App'));","map":{"version":3,"sources":["/Users/teddylin/Desktop/harvard-houses/pages/comments/index.js"],"names":["React","ReactCSSTransitionGroup","addons","CSSTransitionGroup","CommentBox","props","state","data","handleCommentSubmit","bind","handleDelete","$","ajax","url","dataType","success","setState","error","xhr","status","err","console","toString","loadCommentsFromServer","comment","comments","newComments","concat","type","proprs","index","splice","Component","CommentForm","handleSubmit","onChange","author","text","e","target","name","value","preventDefault","onCommentSubmit","trim","CommentList","commentNodes","map","i","Comment","keyValue","rawMarkup","marked","children","sanatize","__html","ReactDOM","render","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react'\n\n\n\nlet ReactCSSTransitionGroup = React.addons.CSSTransitionGroup;\n\nclass CommentBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {data: props.data};\n    this.handleCommentSubmit = this.handleCommentSubmit.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n  loadCommentsFromServer() {\n    $.ajax({\n      url: this.props.url,\n      dataType: 'json',\n      success: (data) => {\n        this.setState({data: data});\n      },\n      error:(xhr, status, err) => {\n        console.error(this.props.url, status, err.toString());\n      }\n    });\n  }\n  componentDidMount() {\n    this.loadCommentsFromServer();\n\n    // Disabled Polling because the 'server' never updates\n    // it is just a static file with two comments\n    // setInterval(this.loadCommentsFromServer, this.props.pollInterval);\n  }\n  handleCommentSubmit(comment) {\n\n    let comments = this.state.data;\n\n    let newComments = comments.concat([comment]);\n\n    this.setState({\n      data: newComments\n    });\n    $.ajax({\n      url: this.props.url,\n      dataType: 'json',\n      type: 'POST',\n      data: comment,\n      success: (data) => {\n        this.setState({data: data});\n      },\n      error: (xhr, status, err) => {\n        console.error(this.proprs.url, status, err.toString());\n      }\n    });\n  }\n  handleDelete(index) {\n\n    let comments = this.state.data;\n\n    comments.splice(index, 1);\n\n    this.setState({\n      data: comments\n    })\n  }\n  render() {\n    return(\n      <div className=\"col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\">\n        <CommentForm onCommentSubmit={this.handleCommentSubmit}/>\n        <CommentList data={this.state.data} handleDelete={this.handleDelete}/>\n      </div>\n    )\n  }\n}\n\nclass CommentForm extends React.Component {\n  constructor() {\n    super();\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.state = this.setState({\n      author: '',\n      text: ''\n    })\n  }\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  handleSubmit(e) {\n    e.preventDefault();\n    if(!this.state.text || !this.state.author) {\n      return;\n    }\n    this.props.onCommentSubmit({author: this.state.author.trim(), text: this.state.text.trim()});\n    this.setState({\n      author: '',\n      text: ''\n    })\n    return;\n  }\n  render(){\n    return (\n      <form onSubmit={this.handleSubmit} className=\"row Container\">\n        <div className=\"col-xs-12\">\n          <h1>Comments</h1>\n        </div>\n        <div className=\"col-xs-12\">\n          <input type=\"text\" placeholder=\"Your name\" name=\"author\" onChange={this.onChange} ref=\"author\"/>\n        </div>\n        <div className=\"col-xs-12\">\n          <input type=\"text\" placeholder=\"Say something...\" name=\"text\" onChange={this.onChange} ref=\"text\"/>\n        </div>\n        <div className=\"col-xs-12\">\n          <input type=\"submit\" value=\"Post\" />\n        </div>\n      </form>\n    )\n  }\n}\n\nclass CommentList extends React.Component {\n  render() {\n    let handleDelete = this.props.handleDelete;\n\n    let commentNodes = this.props.data.map((comment, i) => {\n      return (\n        <Comment author={comment.author} keyValue={i} handleDelete={handleDelete}>\n          {comment.text}\n        </Comment>\n      )\n    });\n    return (\n      <ReactCSSTransitionGroup transitionName=\"example\">\n        {commentNodes}\n      </ReactCSSTransitionGroup>\n    )\n  }\n};\n\nclass Comment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n  handleDelete() {\n    this.props.handleDelete(this.props.keyValue);\n  }\n  render() {\n    let rawMarkup = marked(this.props.children.toString(), {sanatize: true});\n    return(\n      <div className=\"row Container\">\n        <div className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <span className=\"close\" onClick={this.handleDelete}>\n            <i className=\"fa fa-trash\" />\n          </span>\n          <h2>\n            {this.props.author}\n          </h2>\n        </div>\n        <div className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 Comment\">\n          <span dangerouslySetInnerHTML = {{__html: rawMarkup}} />\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<CommentBox url=\"https://codepen.io/Kikoku/pen/Qbwmpb.js\" data={[]} pollInterval={2000}/>, document.getElementById('App'));\n"]},"metadata":{},"sourceType":"module"}